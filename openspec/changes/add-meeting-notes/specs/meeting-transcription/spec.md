# Spec: meeting-transcription

오디오 파일을 텍스트로 변환하는 Speech-to-Text 기능

## ADDED Requirements

### Requirement: Whisper 모델 다운로드

시스템은 사용자가 명시적으로 모델 다운로드를 요청할 때만 다운로드를 시작해야 한다.
모델은 `small` (466MB)을 기본으로 사용하며, 앱 데이터 디렉토리에 저장한다.

#### Scenario: 모델 미설치 시 다운로드 안내

- **WHEN** 모델이 설치되지 않은 상태에서 회의록 패널을 열 때
- **THEN** 시스템은 "모델 다운로드 필요 (466MB)" 메시지와 "다운로드" 버튼을 표시한다

#### Scenario: 사용자가 다운로드 시작

- **WHEN** 사용자가 "다운로드" 버튼을 클릭할 때
- **THEN** 시스템은 Hugging Face에서 모델을 다운로드하고 진행률을 표시한다

#### Scenario: 다운로드 취소

- **WHEN** 사용자가 다운로드 중 "취소" 버튼을 클릭할 때
- **THEN** 시스템은 다운로드를 중단하고 부분 파일을 삭제한다

#### Scenario: 모델 이미 설치됨

- **WHEN** 모델이 이미 다운로드되어 있을 때
- **THEN** 시스템은 "모델 준비 완료" 상태를 표시하고 변환 기능을 활성화한다

#### Scenario: 모델 미설치 시 변환 시도

- **WHEN** 모델이 없는 상태에서 "변환" 버튼을 클릭할 때
- **THEN** 시스템은 "모델 다운로드가 필요합니다" 메시지와 함께 다운로드 버튼을 표시한다

#### Scenario: 파일 업로드는 모델 없이도 가능

- **WHEN** 모델이 설치되지 않은 상태에서 오디오 파일을 업로드할 때
- **THEN** 시스템은 파일을 정상적으로 선택하고 미리보기를 표시한다

### Requirement: 녹음 오디오 처리

시스템은 브라우저에서 녹음된 오디오를 처리할 수 있어야 한다.

#### Scenario: 녹음 데이터 저장

- **WHEN** 프론트엔드에서 녹음된 오디오 데이터(ArrayBuffer)를 전송할 때
- **THEN** 시스템은 데이터를 임시 파일로 저장한다

#### Scenario: 녹음 파일 변환

- **WHEN** 녹음된 WebM 파일이 저장될 때
- **THEN** 시스템은 Whisper가 처리할 수 있는 형식으로 변환한다

### Requirement: 오디오 파일 형식 지원

시스템은 다음 오디오 파일 형식을 지원해야 한다: `.mp3`, `.wav`, `.m4a`, `.webm`

#### Scenario: 지원되는 형식 업로드

- **WHEN** 사용자가 `.mp3`, `.wav`, `.m4a`, `.webm` 파일을 업로드할 때
- **THEN** 시스템은 파일을 처리하고 변환을 시작한다

#### Scenario: 지원되지 않는 형식 업로드

- **WHEN** 사용자가 지원되지 않는 형식의 파일을 업로드할 때
- **THEN** 시스템은 "지원되지 않는 파일 형식입니다" 오류를 표시한다

### Requirement: Speech-to-Text 변환

시스템은 whisper-rs를 사용하여 오디오 파일을 텍스트로 변환해야 한다.
변환은 Rust 백엔드에서 로컬로 처리되며, 한국어를 기본 언어로 사용한다.

#### Scenario: 성공적인 변환

- **WHEN** 유효한 오디오 파일이 제공될 때
- **THEN** 시스템은 오디오를 텍스트로 변환하고 결과를 반환한다

#### Scenario: 변환 중 진행률 표시

- **WHEN** 변환이 진행 중일 때
- **THEN** 시스템은 현재 진행률(퍼센트)을 UI에 표시한다

#### Scenario: 변환 취소

- **WHEN** 사용자가 변환 중 취소 버튼을 클릭할 때
- **THEN** 시스템은 변환을 중단하고 부분 결과를 폐기한다

### Requirement: 변환 결과 반환

시스템은 변환 완료 후 전사본 텍스트를 반환해야 한다.

#### Scenario: 전사본 반환

- **WHEN** 변환이 완료될 때
- **THEN** 시스템은 전체 전사본 텍스트를 문자열로 반환한다
